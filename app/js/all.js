(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){var WRAP_CLASS="CodeMirror-activeline";var BACK_CLASS="CodeMirror-activeline-background";CodeMirror.defineOption("styleActiveLine",false,function(cm,val,old){var prev=old&&old!=CodeMirror.Init;if(val&&!prev){cm.state.activeLines=[];updateActiveLines(cm,cm.listSelections());cm.on("beforeSelectionChange",selectionChange);}else{if(!val&&prev){cm.off("beforeSelectionChange",selectionChange);clearActiveLines(cm);delete cm.state.activeLines;}}});function clearActiveLines(cm){for(var i=0;i<cm.state.activeLines.length;i++){cm.removeLineClass(cm.state.activeLines[i],"wrap",WRAP_CLASS);cm.removeLineClass(cm.state.activeLines[i],"background",BACK_CLASS);}}function sameArray(a,b){if(a.length!=b.length){return false;}for(var i=0;i<a.length;i++){if(a[i]!=b[i]){return false;}}return true;}function updateActiveLines(cm,ranges){var active=[];for(var i=0;i<ranges.length;i++){var range=ranges[i];if(!range.empty()){continue;}var line=cm.getLineHandleVisualStart(range.head.line);if(active[active.length-1]!=line){active.push(line);}}if(sameArray(cm.state.activeLines,active)){return;}cm.operation(function(){clearActiveLines(cm);for(var i=0;i<active.length;i++){cm.addLineClass(active[i],"wrap",WRAP_CLASS);cm.addLineClass(active[i],"background",BACK_CLASS);}cm.state.activeLines=active;});}function selectionChange(cm,sel){updateActiveLines(cm,sel.ranges);}});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){var defaults={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"};var Pos=CodeMirror.Pos;CodeMirror.defineOption("autoCloseBrackets",false,function(cm,val,old){if(old&&old!=CodeMirror.Init){cm.removeKeyMap(keyMap);cm.state.closeBrackets=null;}if(val){cm.state.closeBrackets=val;cm.addKeyMap(keyMap);}});function getOption(conf,name){if(name=="pairs"&&typeof conf=="string"){return conf;}if(typeof conf=="object"&&conf[name]!=null){return conf[name];}return defaults[name];}var bind=defaults.pairs+"`";var keyMap={Backspace:handleBackspace,Enter:handleEnter};for(var i=0;i<bind.length;i++){keyMap["'"+bind.charAt(i)+"'"]=handler(bind.charAt(i));}function handler(ch){return function(cm){return handleChar(cm,ch);};}function getConfig(cm){var deflt=cm.state.closeBrackets;if(!deflt){return null;}var mode=cm.getModeAt(cm.getCursor());return mode.closeBrackets||deflt;}function handleBackspace(cm){var conf=getConfig(cm);if(!conf||cm.getOption("disableInput")){return CodeMirror.Pass;}var pairs=getOption(conf,"pairs");var ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){if(!ranges[i].empty()){return CodeMirror.Pass;}var around=charsAround(cm,ranges[i].head);if(!around||pairs.indexOf(around)%2!=0){return CodeMirror.Pass;}}for(var i=ranges.length-1;i>=0;i--){var cur=ranges[i].head;cm.replaceRange("",Pos(cur.line,cur.ch-1),Pos(cur.line,cur.ch+1));}}function handleEnter(cm){var conf=getConfig(cm);var explode=conf&&getOption(conf,"explode");if(!explode||cm.getOption("disableInput")){return CodeMirror.Pass;}var ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){if(!ranges[i].empty()){return CodeMirror.Pass;}var around=charsAround(cm,ranges[i].head);if(!around||explode.indexOf(around)%2!=0){return CodeMirror.Pass;}}cm.operation(function(){cm.replaceSelection("\n\n",null);cm.execCommand("goCharLeft");ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){var line=ranges[i].head.line;cm.indentLine(line,null,true);cm.indentLine(line+1,null,true);}});}function handleChar(cm,ch){var conf=getConfig(cm);if(!conf||cm.getOption("disableInput")){return CodeMirror.Pass;}var pairs=getOption(conf,"pairs");var pos=pairs.indexOf(ch);if(pos==-1){return CodeMirror.Pass;}var triples=getOption(conf,"triples");var identical=pairs.charAt(pos+1)==ch;var ranges=cm.listSelections();var opening=pos%2==0;var type,next;for(var i=0;i<ranges.length;i++){var range=ranges[i],cur=range.head,curType;var next=cm.getRange(cur,Pos(cur.line,cur.ch+1));if(opening&&!range.empty()){curType="surround";}else{if((identical||!opening)&&next==ch){if(triples.indexOf(ch)>=0&&cm.getRange(cur,Pos(cur.line,cur.ch+3))==ch+ch+ch){curType="skipThree";}else{curType="skip";}}else{if(identical&&cur.ch>1&&triples.indexOf(ch)>=0&&cm.getRange(Pos(cur.line,cur.ch-2),cur)==ch+ch&&(cur.ch<=2||cm.getRange(Pos(cur.line,cur.ch-3),Pos(cur.line,cur.ch-2))!=ch)){curType="addFour";}else{if(identical){if(!CodeMirror.isWordChar(next)&&enteringString(cm,cur,ch)){curType="both";}else{return CodeMirror.Pass;}}else{if(opening&&(cm.getLine(cur.line).length==cur.ch||isClosingBracket(next,pairs)||/\s/.test(next))){curType="both";}else{return CodeMirror.Pass;}}}}}if(!type){type=curType;}else{if(type!=curType){return CodeMirror.Pass;}}}var left=pos%2?pairs.charAt(pos-1):ch;var right=pos%2?ch:pairs.charAt(pos+1);cm.operation(function(){if(type=="skip"){cm.execCommand("goCharRight");}else{if(type=="skipThree"){for(var i=0;i<3;i++){cm.execCommand("goCharRight");}}else{if(type=="surround"){var sels=cm.getSelections();for(var i=0;i<sels.length;i++){sels[i]=left+sels[i]+right;}cm.replaceSelections(sels,"around");}else{if(type=="both"){cm.replaceSelection(left+right,null);cm.triggerElectric(left+right);cm.execCommand("goCharLeft");}else{if(type=="addFour"){cm.replaceSelection(left+left+left+left,"before");cm.execCommand("goCharRight");}}}}}});}function isClosingBracket(ch,pairs){var pos=pairs.lastIndexOf(ch);return pos>-1&&pos%2==1;}function charsAround(cm,pos){var str=cm.getRange(Pos(pos.line,pos.ch-1),Pos(pos.line,pos.ch+1));return str.length==2?str:null;}function enteringString(cm,pos,ch){var line=cm.getLine(pos.line);var token=cm.getTokenAt(pos);if(/\bstring2?\b/.test(token.type)){return false;}var stream=new CodeMirror.StringStream(line.slice(0,pos.ch)+ch+line.slice(pos.ch),4);stream.pos=stream.start=token.start;for(;;){var type1=cm.getMode().token(stream,token.state);if(stream.pos>=pos.ch+1){return/\bstring2?\b/.test(type1);}stream.start=stream.pos;}}});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){function dialogDiv(cm,template,bottom){var wrap=cm.getWrapperElement();var dialog;dialog=wrap.appendChild(document.createElement("div"));if(bottom){dialog.className="CodeMirror-dialog CodeMirror-dialog-bottom";}else{dialog.className="CodeMirror-dialog CodeMirror-dialog-top";}if(typeof template=="string"){dialog.innerHTML=template;}else{dialog.appendChild(template);}return dialog;}function closeNotification(cm,newVal){if(cm.state.currentNotificationClose){cm.state.currentNotificationClose();}cm.state.currentNotificationClose=newVal;}CodeMirror.defineExtension("openDialog",function(template,callback,options){if(!options){options={};}closeNotification(this,null);var dialog=dialogDiv(this,template,options.bottom);var closed=false,me=this;function close(newVal){if(typeof newVal=="string"){inp.value=newVal;}else{if(closed){return;}closed=true;dialog.parentNode.removeChild(dialog);me.focus();if(options.onClose){options.onClose(dialog);}}}var inp=dialog.getElementsByTagName("input")[0],button;if(inp){if(options.value){inp.value=options.value;if(options.selectValueOnOpen!==false){inp.select();}}if(options.onInput){CodeMirror.on(inp,"input",function(e){options.onInput(e,inp.value,close);});}if(options.onKeyUp){CodeMirror.on(inp,"keyup",function(e){options.onKeyUp(e,inp.value,close);});}CodeMirror.on(inp,"keydown",function(e){if(options&&options.onKeyDown&&options.onKeyDown(e,inp.value,close)){return;}if(e.keyCode==27||(options.closeOnEnter!==false&&e.keyCode==13)){inp.blur();CodeMirror.e_stop(e);close();}if(e.keyCode==13){callback(inp.value,e);}});if(options.closeOnBlur!==false){CodeMirror.on(inp,"blur",close);}inp.focus();}else{if(button=dialog.getElementsByTagName("button")[0]){CodeMirror.on(button,"click",function(){close();me.focus();});if(options.closeOnBlur!==false){CodeMirror.on(button,"blur",close);}button.focus();}}return close;});CodeMirror.defineExtension("openConfirm",function(template,callbacks,options){closeNotification(this,null);var dialog=dialogDiv(this,template,options&&options.bottom);var buttons=dialog.getElementsByTagName("button");var closed=false,me=this,blurring=1;function close(){if(closed){return;}closed=true;dialog.parentNode.removeChild(dialog);me.focus();}buttons[0].focus();for(var i=0;i<buttons.length;++i){var b=buttons[i];(function(callback){CodeMirror.on(b,"click",function(e){CodeMirror.e_preventDefault(e);close();if(callback){callback(me);}});})(callbacks[i]);CodeMirror.on(b,"blur",function(){--blurring;setTimeout(function(){if(blurring<=0){close();}},200);});CodeMirror.on(b,"focus",function(){++blurring;});}});CodeMirror.defineExtension("openNotification",function(template,options){closeNotification(this,close);var dialog=dialogDiv(this,template,options&&options.bottom);var closed=false,doneTimer;var duration=options&&typeof options.duration!=="undefined"?options.duration:5000;function close(){if(closed){return;}closed=true;clearTimeout(doneTimer);dialog.parentNode.removeChild(dialog);}CodeMirror.on(dialog,"click",function(e){CodeMirror.e_preventDefault(e);close();});if(duration){doneTimer=setTimeout(close,duration);}return close;});});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){function doFold(cm,pos,options,force){if(options&&options.call){var finder=options;options=null;}else{var finder=getOption(cm,options,"rangeFinder");}if(typeof pos=="number"){pos=CodeMirror.Pos(pos,0);}var minSize=getOption(cm,options,"minFoldSize");function getRange(allowFolded){var range=finder(cm,pos);if(!range||range.to.line-range.from.line<minSize){return null;}var marks=cm.findMarksAt(range.from);for(var i=0;i<marks.length;++i){if(marks[i].__isFold&&force!=="fold"){if(!allowFolded){return null;}range.cleared=true;marks[i].clear();}}return range;}var range=getRange(true);if(getOption(cm,options,"scanUp")){while(!range&&pos.line>cm.firstLine()){pos=CodeMirror.Pos(pos.line-1,0);range=getRange(false);}}if(!range||range.cleared||force==="unfold"){return;}var myWidget=makeWidget(cm,options);CodeMirror.on(myWidget,"mousedown",function(e){myRange.clear();CodeMirror.e_preventDefault(e);});var myRange=cm.markText(range.from,range.to,{replacedWith:myWidget,clearOnEnter:true,__isFold:true});myRange.on("clear",function(from,to){CodeMirror.signal(cm,"unfold",cm,from,to);});CodeMirror.signal(cm,"fold",cm,range.from,range.to);}function makeWidget(cm,options){var widget=getOption(cm,options,"widget");if(typeof widget=="string"){var text=document.createTextNode(widget);widget=document.createElement("span");widget.appendChild(text);widget.className="CodeMirror-foldmarker";}return widget;}CodeMirror.newFoldFunction=function(rangeFinder,widget){return function(cm,pos){doFold(cm,pos,{rangeFinder:rangeFinder,widget:widget});};};CodeMirror.defineExtension("foldCode",function(pos,options,force){doFold(this,pos,options,force);});CodeMirror.defineExtension("isFolded",function(pos){var marks=this.findMarksAt(pos);for(var i=0;i<marks.length;++i){if(marks[i].__isFold){return true;}}});CodeMirror.commands.toggleFold=function(cm){cm.foldCode(cm.getCursor());};CodeMirror.commands.fold=function(cm){cm.foldCode(cm.getCursor(),null,"fold");};CodeMirror.commands.unfold=function(cm){cm.foldCode(cm.getCursor(),null,"unfold");};CodeMirror.commands.foldAll=function(cm){cm.operation(function(){for(var i=cm.firstLine(),e=cm.lastLine();i<=e;i++){cm.foldCode(CodeMirror.Pos(i,0),null,"fold");}});};CodeMirror.commands.unfoldAll=function(cm){cm.operation(function(){for(var i=cm.firstLine(),e=cm.lastLine();i<=e;i++){cm.foldCode(CodeMirror.Pos(i,0),null,"unfold");}});};CodeMirror.registerHelper("fold","combine",function(){var funcs=Array.prototype.slice.call(arguments,0);return function(cm,start){for(var i=0;i<funcs.length;++i){var found=funcs[i](cm,start);if(found){return found;}}};});CodeMirror.registerHelper("fold","auto",function(cm,start){var helpers=cm.getHelpers(start,"fold");for(var i=0;i<helpers.length;i++){var cur=helpers[i](cm,start);if(cur){return cur;}}});var defaultOptions={rangeFinder:CodeMirror.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:false};CodeMirror.defineOption("foldOptions",null);function getOption(cm,options,name){if(options&&options[name]!==undefined){return options[name];}var editorOptions=cm.options.foldOptions;if(editorOptions&&editorOptions[name]!==undefined){return editorOptions[name];}return defaultOptions[name];}CodeMirror.defineExtension("foldOption",function(options,name){return getOption(this,options,name);});});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){var Pos=CodeMirror.Pos;function findParagraph(cm,pos,options){var startRE=options.paragraphStart||cm.getHelper(pos,"paragraphStart");for(var start=pos.line,first=cm.firstLine();start>first;--start){var line=cm.getLine(start);if(startRE&&startRE.test(line)){break;}if(!/\S/.test(line)){++start;break;}}var endRE=options.paragraphEnd||cm.getHelper(pos,"paragraphEnd");for(var end=pos.line+1,last=cm.lastLine();end<=last;++end){var line=cm.getLine(end);if(endRE&&endRE.test(line)){++end;break;}if(!/\S/.test(line)){break;}}return{from:start,to:end};}function findBreakPoint(text,column,wrapOn,killTrailingSpace){for(var at=column;at>0;--at){if(wrapOn.test(text.slice(at-1,at+1))){break;}}if(at==0){at=column;}var endOfText=at;if(killTrailingSpace){while(text.charAt(endOfText-1)==" "){--endOfText;}}return{from:endOfText,to:at};}function wrapRange(cm,from,to,options){from=cm.clipPos(from);to=cm.clipPos(to);var column=options.column||80;var wrapOn=options.wrapOn||/\s\S|-[^\.\d]/;var killTrailing=options.killTrailingSpace!==false;var changes=[],curLine="",curNo=from.line;var lines=cm.getRange(from,to,false);if(!lines.length){return null;}var leadingSpace=lines[0].match(/^[ \t]*/)[0];for(var i=0;i<lines.length;++i){var text=lines[i],oldLen=curLine.length,spaceInserted=0;if(curLine&&text&&!wrapOn.test(curLine.charAt(curLine.length-1)+text.charAt(0))){curLine+=" ";spaceInserted=1;}var spaceTrimmed="";if(i){spaceTrimmed=text.match(/^\s*/)[0];text=text.slice(spaceTrimmed.length);}curLine+=text;if(i){var firstBreak=curLine.length>column&&leadingSpace==spaceTrimmed&&findBreakPoint(curLine,column,wrapOn,killTrailing);if(!firstBreak||firstBreak.from!=oldLen||firstBreak.to!=oldLen+spaceInserted){changes.push({text:[spaceInserted?" ":""],from:Pos(curNo,oldLen),to:Pos(curNo+1,spaceTrimmed.length)});}else{curLine=leadingSpace+text;++curNo;}}while(curLine.length>column){var bp=findBreakPoint(curLine,column,wrapOn,killTrailing);changes.push({text:["",leadingSpace],from:Pos(curNo,bp.from),to:Pos(curNo,bp.to)});curLine=leadingSpace+curLine.slice(bp.to);++curNo;}}if(changes.length){cm.operation(function(){for(var i=0;i<changes.length;++i){var change=changes[i];cm.replaceRange(change.text,change.from,change.to);}});}return changes.length?{from:changes[0].from,to:CodeMirror.changeEnd(changes[changes.length-1])}:null;}CodeMirror.defineExtension("wrapParagraph",function(pos,options){options=options||{};if(!pos){pos=this.getCursor();}var para=findParagraph(this,pos,options);return wrapRange(this,Pos(para.from,0),Pos(para.to-1),options);});CodeMirror.commands.wrapLines=function(cm){cm.operation(function(){var ranges=cm.listSelections(),at=cm.lastLine()+1;for(var i=ranges.length-1;i>=0;i--){var range=ranges[i],span;if(range.empty()){var para=findParagraph(cm,range.head,{});span={from:Pos(para.from,0),to:Pos(para.to-1)};}else{span={from:range.from(),to:range.to()};}if(span.to.line>=at){continue;}at=span.from.line;wrapRange(cm,span.from,span.to,{});}});};CodeMirror.defineExtension("wrapRange",function(from,to,options){return wrapRange(this,from,to,options||{});});CodeMirror.defineExtension("wrapParagraphsInRange",function(from,to,options){options=options||{};var cm=this,paras=[];for(var line=from.line;line<=to.line;){var para=findParagraph(cm,Pos(line,0),options);paras.push(para);line=para.to;}var madeChange=false;if(paras.length){cm.operation(function(){for(var i=paras.length-1;i>=0;--i){madeChange=madeChange||wrapRange(cm,Pos(paras[i].from,0),Pos(paras[i].to-1),options);}});}return madeChange;});});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){var ie_lt8=/MSIE \d/.test(navigator.userAgent)&&(document.documentMode==null||document.documentMode<8);var Pos=CodeMirror.Pos;var matching={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function findMatchingBracket(cm,where,strict,config){var line=cm.getLineHandle(where.line),pos=where.ch-1;var match=(pos>=0&&matching[line.text.charAt(pos)])||matching[line.text.charAt(++pos)];if(!match){return null;}var dir=match.charAt(1)==">"?1:-1;if(strict&&(dir>0)!=(pos==where.ch)){return null;}var style=cm.getTokenTypeAt(Pos(where.line,pos+1));var found=scanForBracket(cm,Pos(where.line,pos+(dir>0?1:0)),dir,style||null,config);if(found==null){return null;}return{from:Pos(where.line,pos),to:found&&found.pos,match:found&&found.ch==match.charAt(0),forward:dir>0};}function scanForBracket(cm,where,dir,style,config){var maxScanLen=(config&&config.maxScanLineLength)||10000;var maxScanLines=(config&&config.maxScanLines)||1000;var stack=[];var re=config&&config.bracketRegex?config.bracketRegex:/[(){}[\]]/;var lineEnd=dir>0?Math.min(where.line+maxScanLines,cm.lastLine()+1):Math.max(cm.firstLine()-1,where.line-maxScanLines);for(var lineNo=where.line;lineNo!=lineEnd;lineNo+=dir){var line=cm.getLine(lineNo);if(!line){continue;}var pos=dir>0?0:line.length-1,end=dir>0?line.length:-1;if(line.length>maxScanLen){continue;}if(lineNo==where.line){pos=where.ch-(dir<0?1:0);}for(;pos!=end;pos+=dir){var ch=line.charAt(pos);if(re.test(ch)&&(style===undefined||cm.getTokenTypeAt(Pos(lineNo,pos+1))==style)){var match=matching[ch];if((match.charAt(1)==">")==(dir>0)){stack.push(ch);}else{if(!stack.length){return{pos:Pos(lineNo,pos),ch:ch};}else{stack.pop();}}}}}return lineNo-dir==(dir>0?cm.lastLine():cm.firstLine())?false:null;}function matchBrackets(cm,autoclear,config){var maxHighlightLen=cm.state.matchBrackets.maxHighlightLineLength||1000;var marks=[],ranges=cm.listSelections();for(var i=0;i<ranges.length;i++){var match=ranges[i].empty()&&findMatchingBracket(cm,ranges[i].head,false,config);if(match&&cm.getLine(match.from.line).length<=maxHighlightLen){var style=match.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";marks.push(cm.markText(match.from,Pos(match.from.line,match.from.ch+1),{className:style}));if(match.to&&cm.getLine(match.to.line).length<=maxHighlightLen){marks.push(cm.markText(match.to,Pos(match.to.line,match.to.ch+1),{className:style}));}}}if(marks.length){if(ie_lt8&&cm.state.focused){cm.focus();}var clear=function(){cm.operation(function(){for(var i=0;i<marks.length;i++){marks[i].clear();}});};if(autoclear){setTimeout(clear,800);}else{return clear;}}}var currentlyHighlighted=null;function doMatchBrackets(cm){cm.operation(function(){if(currentlyHighlighted){currentlyHighlighted();currentlyHighlighted=null;}currentlyHighlighted=matchBrackets(cm,false,cm.state.matchBrackets);});}CodeMirror.defineOption("matchBrackets",false,function(cm,val,old){if(old&&old!=CodeMirror.Init){cm.off("cursorActivity",doMatchBrackets);}if(val){cm.state.matchBrackets=typeof val=="object"?val:{};cm.on("cursorActivity",doMatchBrackets);}});CodeMirror.defineExtension("matchBrackets",function(){matchBrackets(this,true);});CodeMirror.defineExtension("findMatchingBracket",function(pos,strict,config){return findMatchingBracket(this,pos,strict,config);});CodeMirror.defineExtension("scanForBracket",function(pos,dir,style,config){return scanForBracket(this,pos,dir,style,config);});});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){function searchOverlay(query,caseInsensitive){if(typeof query=="string"){query=new RegExp(query.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),caseInsensitive?"gi":"g");}else{if(!query.global){query=new RegExp(query.source,query.ignoreCase?"gi":"g");}}return{token:function(stream){query.lastIndex=stream.pos;var match=query.exec(stream.string);if(match&&match.index==stream.pos){stream.pos+=match[0].length;return"searching";}else{if(match){stream.pos=match.index;}else{stream.skipToEnd();}}}};}function SearchState(){this.posFrom=this.posTo=this.lastQuery=this.query=null;this.overlay=null;}function getSearchState(cm){return cm.state.search||(cm.state.search=new SearchState());}function queryCaseInsensitive(query){return typeof query=="string"&&query==query.toLowerCase();}function getSearchCursor(cm,query,pos){return cm.getSearchCursor(query,pos,queryCaseInsensitive(query));}function dialog(cm,text,shortText,deflt,f){if(cm.openDialog){cm.openDialog(text,f,{value:deflt,selectValueOnOpen:true});}else{f(prompt(shortText,deflt));}}function confirmDialog(cm,text,shortText,fs){if(cm.openConfirm){cm.openConfirm(text,fs);}else{if(confirm(shortText)){fs[0]();}}}function parseQuery(query){var isRE=query.match(/^\/(.*)\/([a-z]*)$/);if(isRE){try{query=new RegExp(isRE[1],isRE[2].indexOf("i")==-1?"":"i");}catch(e){}}if(typeof query=="string"?query=="":query.test("")){query=/x^/;}return query;}var queryDialog='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';function doSearch(cm,rev){var state=getSearchState(cm);if(state.query){return findNext(cm,rev);}var q=cm.getSelection()||state.lastQuery;dialog(cm,queryDialog,"Search for:",q,function(query){cm.operation(function(){if(!query||state.query){return;}state.query=parseQuery(query);cm.removeOverlay(state.overlay,queryCaseInsensitive(state.query));state.overlay=searchOverlay(state.query,queryCaseInsensitive(state.query));cm.addOverlay(state.overlay);if(cm.showMatchesOnScrollbar){if(state.annotate){state.annotate.clear();state.annotate=null;}state.annotate=cm.showMatchesOnScrollbar(state.query,queryCaseInsensitive(state.query));}state.posFrom=state.posTo=cm.getCursor();findNext(cm,rev);});});}function findNext(cm,rev){cm.operation(function(){var state=getSearchState(cm);var cursor=getSearchCursor(cm,state.query,rev?state.posFrom:state.posTo);if(!cursor.find(rev)){cursor=getSearchCursor(cm,state.query,rev?CodeMirror.Pos(cm.lastLine()):CodeMirror.Pos(cm.firstLine(),0));if(!cursor.find(rev)){return;}}cm.setSelection(cursor.from(),cursor.to());cm.scrollIntoView({from:cursor.from(),to:cursor.to()});state.posFrom=cursor.from();state.posTo=cursor.to();});}function clearSearch(cm){cm.operation(function(){var state=getSearchState(cm);state.lastQuery=state.query;if(!state.query){return;}state.query=null;cm.removeOverlay(state.overlay);if(state.annotate){state.annotate.clear();state.annotate=null;}});}var replaceQueryDialog='Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>';var replacementQueryDialog='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>';var doReplaceConfirm="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";function replace(cm,all){if(cm.getOption("readOnly")){return;}var query=cm.getSelection()||getSearchState(cm).lastQuery;dialog(cm,replaceQueryDialog,"Replace:",query,function(query){if(!query){return;}query=parseQuery(query);dialog(cm,replacementQueryDialog,"Replace with:","",function(text){if(all){cm.operation(function(){for(var cursor=getSearchCursor(cm,query);cursor.findNext();){if(typeof query!="string"){var match=cm.getRange(cursor.from(),cursor.to()).match(query);cursor.replace(text.replace(/\$(\d)/g,function(_,i){return match[i];}));}else{cursor.replace(text);}}});}else{clearSearch(cm);var cursor=getSearchCursor(cm,query,cm.getCursor());var advance=function(){var start=cursor.from(),match;if(!(match=cursor.findNext())){cursor=getSearchCursor(cm,query);if(!(match=cursor.findNext())||(start&&cursor.from().line==start.line&&cursor.from().ch==start.ch)){return;}}cm.setSelection(cursor.from(),cursor.to());cm.scrollIntoView({from:cursor.from(),to:cursor.to()});confirmDialog(cm,doReplaceConfirm,"Replace?",[function(){doReplace(match);},advance]);};var doReplace=function(match){cursor.replace(typeof query=="string"?text:text.replace(/\$(\d)/g,function(_,i){return match[i];}));advance();};advance();}});});}CodeMirror.commands.find=function(cm){clearSearch(cm);doSearch(cm);};CodeMirror.commands.findNext=doSearch;CodeMirror.commands.findPrev=function(cm){doSearch(cm,true);};CodeMirror.commands.clearSearch=clearSearch;CodeMirror.commands.replace=replace;CodeMirror.commands.replaceAll=function(cm){replace(cm,true);};});(function(mod){if(typeof exports=="object"&&typeof module=="object"){mod(require("../../lib/codemirror"));}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],mod);}else{mod(CodeMirror);}}})(function(CodeMirror){var Pos=CodeMirror.Pos;function SearchCursor(doc,query,pos,caseFold){this.atOccurrence=false;this.doc=doc;if(caseFold==null&&typeof query=="string"){caseFold=false;}pos=pos?doc.clipPos(pos):Pos(0,0);this.pos={from:pos,to:pos};if(typeof query!="string"){if(!query.global){query=new RegExp(query.source,query.ignoreCase?"ig":"g");}this.matches=function(reverse,pos){if(reverse){query.lastIndex=0;var line=doc.getLine(pos.line).slice(0,pos.ch),cutOff=0,match,start;for(;;){query.lastIndex=cutOff;var newMatch=query.exec(line);if(!newMatch){break;}match=newMatch;start=match.index;cutOff=match.index+(match[0].length||1);if(cutOff==line.length){break;}}var matchLen=(match&&match[0].length)||0;if(!matchLen){if(start==0&&line.length==0){match=undefined;}else{if(start!=doc.getLine(pos.line).length){matchLen++;}}}}else{query.lastIndex=pos.ch;var line=doc.getLine(pos.line),match=query.exec(line);var matchLen=(match&&match[0].length)||0;var start=match&&match.index;if(start+matchLen!=line.length&&!matchLen){matchLen=1;}}if(match&&matchLen){return{from:Pos(pos.line,start),to:Pos(pos.line,start+matchLen),match:match};}};}else{var origQuery=query;if(caseFold){query=query.toLowerCase();}var fold=caseFold?function(str){return str.toLowerCase();}:function(str){return str;};var target=query.split("\n");if(target.length==1){if(!query.length){this.matches=function(){};}else{this.matches=function(reverse,pos){if(reverse){var orig=doc.getLine(pos.line).slice(0,pos.ch),line=fold(orig);var match=line.lastIndexOf(query);if(match>-1){match=adjustPos(orig,line,match);return{from:Pos(pos.line,match),to:Pos(pos.line,match+origQuery.length)};}}else{var orig=doc.getLine(pos.line).slice(pos.ch),line=fold(orig);var match=line.indexOf(query);if(match>-1){match=adjustPos(orig,line,match)+pos.ch;return{from:Pos(pos.line,match),to:Pos(pos.line,match+origQuery.length)};}}};}}else{var origTarget=origQuery.split("\n");this.matches=function(reverse,pos){var last=target.length-1;if(reverse){if(pos.line-(target.length-1)<doc.firstLine()){return;}if(fold(doc.getLine(pos.line).slice(0,origTarget[last].length))!=target[target.length-1]){return;}var to=Pos(pos.line,origTarget[last].length);for(var ln=pos.line-1,i=last-1;i>=1;--i,--ln){if(target[i]!=fold(doc.getLine(ln))){return;}}var line=doc.getLine(ln),cut=line.length-origTarget[0].length;if(fold(line.slice(cut))!=target[0]){return;}return{from:Pos(ln,cut),to:to};}else{if(pos.line+(target.length-1)>doc.lastLine()){return;}var line=doc.getLine(pos.line),cut=line.length-origTarget[0].length;if(fold(line.slice(cut))!=target[0]){return;}var from=Pos(pos.line,cut);for(var ln=pos.line+1,i=1;i<last;++i,++ln){if(target[i]!=fold(doc.getLine(ln))){return;}}if(fold(doc.getLine(ln).slice(0,origTarget[last].length))!=target[last]){return;}return{from:from,to:Pos(ln,origTarget[last].length)};}};}}}SearchCursor.prototype={findNext:function(){return this.find(false);},findPrevious:function(){return this.find(true);},find:function(reverse){var self=this,pos=this.doc.clipPos(reverse?this.pos.from:this.pos.to);function savePosAndFail(line){var pos=Pos(line,0);self.pos={from:pos,to:pos};self.atOccurrence=false;return false;}for(;;){if(this.pos=this.matches(reverse,pos)){this.atOccurrence=true;return this.pos.match||true;}if(reverse){if(!pos.line){return savePosAndFail(0);}pos=Pos(pos.line-1,this.doc.getLine(pos.line-1).length);}else{var maxLine=this.doc.lineCount();if(pos.line==maxLine-1){return savePosAndFail(maxLine);}pos=Pos(pos.line+1,0);}}},from:function(){if(this.atOccurrence){return this.pos.from;}},to:function(){if(this.atOccurrence){return this.pos.to;}},replace:function(newText,origin){if(!this.atOccurrence){return;}var lines=CodeMirror.splitLines(newText);this.doc.replaceRange(lines,this.pos.from,this.pos.to,origin);this.pos.to=Pos(this.pos.from.line+lines.length-1,lines[lines.length-1].length+(lines.length==1?this.pos.from.ch:0));}};function adjustPos(orig,folded,pos){if(orig.length==folded.length){return pos;}for(var pos1=Math.min(pos,orig.length);;){var len1=orig.slice(0,pos1).toLowerCase().length;if(len1<pos){++pos1;}else{if(len1>pos){--pos1;}else{return pos1;}}}}CodeMirror.defineExtension("getSearchCursor",function(query,pos,caseFold){return new SearchCursor(this.doc,query,pos,caseFold);});CodeMirror.defineDocExtension("getSearchCursor",function(query,pos,caseFold){return new SearchCursor(this,query,pos,caseFold);});CodeMirror.defineExtension("selectMatches",function(query,caseFold){var ranges=[];var cur=this.getSearchCursor(query,this.getCursor("from"),caseFold);while(cur.findNext()){if(CodeMirror.cmpPos(cur.to(),this.getCursor("to"))>0){break;}ranges.push({anchor:cur.from(),head:cur.to()});}if(ranges.length){this.setSelections(ranges,0);}});});(function(mod){if(typeof exports=="object"&&typeof module=="object"){return mod(exports);}if(typeof define=="function"&&define.amd){return define(["exports"],mod);}mod(tern.comment||(tern.comment={}));})(function(exports){function isSpace(ch){return(ch<14&&ch>8)||ch===32||ch===160;}function onOwnLine(text,pos){for(;pos>0;--pos){var ch=text.charCodeAt(pos-1);if(ch==10){break;}if(!isSpace(ch)){return false;}}return true;}exports.commentsBefore=function(text,pos){var found=null,emptyLines=0,topIsLineComment;out:while(pos>0){var prev=text.charCodeAt(pos-1);if(prev==10){for(var scan=--pos,sawNonWS=false;scan>0;--scan){prev=text.charCodeAt(scan-1);if(prev==47&&text.charCodeAt(scan-2)==47){if(!onOwnLine(text,scan-2)){break out;}var content=text.slice(scan,pos);if(!emptyLines&&topIsLineComment){found[0]=content+"\n"+found[0];}else{(found||(found=[])).unshift(content);}topIsLineComment=true;emptyLines=0;pos=scan-2;break;}else{if(prev==10){if(!sawNonWS&&++emptyLines>1){break out;}break;}else{if(!sawNonWS&&!isSpace(prev)){sawNonWS=true;}}}}}else{if(prev==47&&text.charCodeAt(pos-2)==42){for(var scan=pos-2;scan>1;--scan){if(text.charCodeAt(scan-1)==42&&text.charCodeAt(scan-2)==47){if(!onOwnLine(text,scan-2)){break out;}(found||(found=[])).unshift(text.slice(scan,pos-2));topIsLineComment=false;emptyLines=0;break;}}pos=scan-2;}else{if(isSpace(prev)){--pos;}else{break;}}}}return found;};exports.commentAfter=function(text,pos){while(pos<text.length){var next=text.charCodeAt(pos);if(next==47){var after=text.charCodeAt(pos+1),end;if(after==47){end=text.indexOf("\n",pos+2);}else{if(after==42){end=text.indexOf("*/",pos+2);}else{return;}}return text.slice(pos+2,end<0?text.length:end);}else{if(isSpace(next)){++pos;}}}};exports.ensureCommentsBefore=function(text,node){if(node.hasOwnProperty("commentsBefore")){return node.commentsBefore;}return node.commentsBefore=exports.commentsBefore(text,node.start);};});(function(){var shakeTime=0,shakeTimeMax=0,shakeIntensity=1,lastTime=0,particles=[],particlePointer=0,MAX_PARTICLES=500,PARTICLE_NUM_RANGE={min:5,max:10},PARTICLE_GRAVITY=0.08,PARTICLE_ALPHA_FADEOUT=0.96,PARTICLE_VELOCITY_RANGE={x:[-1,1],y:[-3.5,-1.5]},w=window.innerWidth,h=window.innerHeight,effect;var cm;var cmNode;var ctx;var throttledShake=throttle(shake,100);var throttledSpawnParticles=throttle(spawnParticles,100);function initCanvas(){var canvas=document.createElement("canvas");ctx=canvas.getContext("2d"),canvas.style.position="absolute";canvas.style.top=0;canvas.style.left=0;canvas.style.zIndex=1;canvas.style.pointerEvents="none";canvas.width=w;canvas.height=h;document.body.appendChild(canvas);}function getRGBComponents(node){var color=getComputedStyle(node).color;if(color){try{return color.match(/(\d+), (\d+), (\d+)/).slice(1);}catch(e){return[255,255,255];}}else{return[255,255,255];}}function spawnParticles(type){var cursorPos=cm.getCursor();var pos=cm.cursorCoords();var node=document.elementFromPoint(pos.left-5,pos.top+5);type=cm.getTokenAt(cursorPos);if(type){type=type.type;}var numParticles=random(PARTICLE_NUM_RANGE.min,PARTICLE_NUM_RANGE.max);color=getRGBComponents(node);for(var i=numParticles;i--;){particles[particlePointer]=createParticle(pos.left+10,pos.top,color);particlePointer=(particlePointer+1)%MAX_PARTICLES;}}function createParticle(x,y,color){var p={x:x,y:y+10,alpha:1,color:color};if(effect===1){p.size=random(2,4);p.vx=PARTICLE_VELOCITY_RANGE.x[0]+Math.random()*(PARTICLE_VELOCITY_RANGE.x[1]-PARTICLE_VELOCITY_RANGE.x[0]);p.vy=PARTICLE_VELOCITY_RANGE.y[0]+Math.random()*(PARTICLE_VELOCITY_RANGE.y[1]-PARTICLE_VELOCITY_RANGE.y[0]);}else{if(effect===2){p.size=random(2,8);p.drag=0.92;p.vx=random(-3,3);p.vy=random(-3,3);p.wander=0.15;p.theta=random(0,360)*Math.PI/180;}}return p;}function effect1(particle){particle.vy+=PARTICLE_GRAVITY;particle.x+=particle.vx;particle.y+=particle.vy;particle.alpha*=PARTICLE_ALPHA_FADEOUT;ctx.fillStyle="rgba("+particle.color[0]+","+particle.color[1]+","+particle.color[2]+","+particle.alpha+")";ctx.fillRect(Math.round(particle.x-1),Math.round(particle.y-1),particle.size,particle.size);}function effect2(particle){particle.x+=particle.vx;particle.y+=particle.vy;particle.vx*=particle.drag;particle.vy*=particle.drag;particle.theta+=random(-0.5,0.5);particle.vx+=Math.sin(particle.theta)*0.1;particle.vy+=Math.cos(particle.theta)*0.1;particle.size*=0.96;ctx.fillStyle="rgba("+particle.color[0]+","+particle.color[1]+","+particle.color[2]+","+particle.alpha+")";ctx.beginPath();ctx.arc(Math.round(particle.x-1),Math.round(particle.y-1),particle.size,0,2*Math.PI);ctx.fill();}function drawParticles(timeDelta){var particle;for(var i=particles.length;i--;){particle=particles[i];if(!particle||particle.alpha<0.01||particle.size<=0.5){continue;}if(effect===1){effect1(particle);}else{if(effect===2){effect2(particle);}}}}function shake(time){shakeTime=shakeTimeMax=time;}function random(min,max){if(!max){max=min;min=0;}return min+~~(Math.random()*(max-min+1));}function throttle(callback,limit){var wait=false;return function(){if(!wait){callback.apply(this,arguments);wait=true;setTimeout(function(){wait=false;},limit);}};}function loop(){ctx.clearRect(0,0,w,h);var current_time=new Date().getTime();if(!lastTime){last_time=current_time;}var dt=(current_time-lastTime)/1000;lastTime=current_time;if(shakeTime>0){shakeTime-=dt;var magnitude=(shakeTime/shakeTimeMax)*shakeIntensity;var shakeX=random(-magnitude,magnitude);var shakeY=random(-magnitude,magnitude);cmNode.style.transform="translate("+shakeX+"px,"+shakeY+"px)";}drawParticles();requestAnimationFrame(loop);}CodeMirror.defineOption("blastCode",false,function(c,val,old){if(val){cm=c;cm.state.blastCode=true;effect=val.effect||2;cmNode=cm.getWrapperElement();initCanvas();loop();cm.on("change",function(instance,change){throttledShake(0.3);throttledSpawnParticles();});}});})();!function(a,b){"object"==typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b();}(this,function(){function a(a,b){var c,d=document.createElement(a||"div");for(c in b){d[c]=b[c];}return d;}function b(a){for(var b=1,c=arguments.length;c>b;b++){a.appendChild(arguments[b]);}return a;}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=0.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(k.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+0.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",k.cssRules.length),m[e]=1),e;}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b]){return b;}for(d=0;d<l.length;d++){if(c=l[d]+b,void 0!==e[c]){return c;}}}function e(a,b){for(var c in b){a.style[d(a,c)||c]=b[c];}return a;}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c){void 0===a[d]&&(a[d]=c[d]);}}return a;}function g(a,b){return"string"==typeof a?a:a[b%a.length];}function h(a){this.opts=f(a||{},h.defaults,n);}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c);}k.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k});}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))));}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow){for(i=1;i<=d.lines;i++){h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");}}for(i=1;i<=d.lines;i++){h(i);}return b(a,m);},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c));};}var j,k,l=["webkit","Moz","ms","O"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#CCC",opacity:0.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++){g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);}c.timeout=c.el&&setTimeout(o,~~(1000/k));}();}return c;},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this;},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"});}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++){i=e(a(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));}return d;},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c);}}),"undefined"!=typeof document){k=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet;}();var o=e(a("group"),{behavior:"url(#default#VML)"});!d(o,"transform")&&o.adj?i():j=d(o,"animation");}return h;});(function(){var e,t=function(e,t){return function(){return e.apply(t,arguments);};},n=[].slice;e=function(){function e(e){this.onCloseWebsocket=t(this.onCloseWebsocket,this),this.onOpenWebsocket=t(this.onOpenWebsocket,this),this.route=t(this.route,this),this.onMessage=t(this.onMessage,this),this.url=e,this.waiting_cb={},this.wrapper_nonce=document.location.href.replace(/.*wrapper_nonce=([A-Za-z0-9]+).*/,"$1"),this.connect(),this.next_message_id=1,this.init();}return e.prototype.init=function(){return this;},e.prototype.connect=function(){return this.target=window.parent,window.addEventListener("message",this.onMessage,!1),this.cmd("innerReady");},e.prototype.onMessage=function(e){var t,n;return n=e.data,t=n.cmd,"response"===t?null!=this.waiting_cb[n.to]?this.waiting_cb[n.to](n.result):this.log("Websocket callback not found:",n):"wrapperReady"===t?this.cmd("innerReady"):"ping"===t?this.response(n.id,"pong"):"wrapperOpenedWebsocket"===t?this.onOpenWebsocket():"wrapperClosedWebsocket"===t?this.onCloseWebsocket():this.route(t,n);},e.prototype.route=function(e,t){return this.log("Unknown command",t);},e.prototype.response=function(e,t){return this.send({cmd:"response",to:e,result:t});},e.prototype.cmd=function(e,t,n){return null==t&&(t={}),null==n&&(n=null),this.send({cmd:e,params:t},n);},e.prototype.send=function(e,t){return null==t&&(t=null),e.wrapper_nonce=this.wrapper_nonce,e.id=this.next_message_id,this.next_message_id+=1,this.target.postMessage(e,"*"),t?this.waiting_cb[e.id]=t:void 0;},e.prototype.log=function(){var e;return e=1<=arguments.length?n.call(arguments,0):[],console.log.apply(console,["[ZeroFrame]"].concat(n.call(e)));},e.prototype.onOpenWebsocket=function(){return this.log("Websocket open");},e.prototype.onCloseWebsocket=function(){return this.log("Websocket close");},e;}(),window.ZeroFrame=e;}).call(this);var codemirror;var delay;var status_pane;var preview;var boilerplate;var code;var inlet;window.addEventListener("load",init);function ajax(url,callback){var request=new XMLHttpRequest();request.open("GET",url,true);request.onload=function(){var response=request.response;if(callback){callback(response);}};request.send();}function init(){status_pane=document.getElementById("status_pane");boilerplate=[];boilerplate[0]="<html><body><style>body {margin: 0; overflow: hidden;}</style><script>try {";boilerplate[1]="} catch (e) {window.parent.reportError(e);}</scr";boilerplate[2]="ipt></body></html>";code="";codemirror=CodeMirror(document.querySelector("editor"),{value:code,lineNumbers:true,mode:"javascript",indentWithTabs:true,tabSize:4,indentUnit:4,lineWrapping:true,autoCloseBrackets:true,matchBrackets:true,keyMap:"sublime",showCursorWhenSelecting:true,theme:"monokai",hintOptions:{completeSingle:false},blastCode:true,styleActiveLine:true});inlet=Inlet(codemirror);codemirror.on("change",function(){clearTimeout(delay);delay=setTimeout(function(){compile();},300);});templates.innerHTML='<option value="">--Load--</option>	<option>particle1</option>	<option>particle2</option>	<option>particle3</option>	<option>particle4</option>	<option>particle5</option>	<option>particle6</option>	<option>infused2</option>	<option>webgl-1</option>	<option>webgl-2</option>	<option>webgl-3</option>	<option>marble1</option>	<option>drag1</option>	<option>drag2</option>	<option>sound1</option>	<option>editor1</option>	<option>game0</option>	<option>game1</option>	<option>game2</option>';insert_templates.innerHTML='<option value="">--Insert--</option>	<option>draw</option>	<option>circle</option>	<option>mouse</option>	<option>webrtc</option>	<option>text</option>';if(location.hash){alert("hash disabled");}}function initAutocomplete(){var server;function start(code){server=new CodeMirror.TernServer({defs:code,queryOptions:{completions:{filter:false,caseInsensitive:true}},plugins:{threejs:null}});codemirror.setOption("extraKeys",{"Ctrl-Space":function(cm){server.complete(cm);},"Ctrl-I":function(cm){server.showType(cm);},"Ctrl-O":function(cm){server.showDocs(cm);},"Alt-.":function(cm){server.jumpToDef(cm);},"Alt-,":function(cm){server.jumpBack(cm);},"Ctrl-Q":function(cm){server.rename(cm);},"Ctrl-.":function(cm){server.selectName(cm);},"Alt-Down":function(){},"Ctrl-Down":function(){console.log("down");},"Ctrl-M":function(){compileAndRun();},"Ctrl-Enter":function(){}});codemirror.on("cursorActivity",function(cm){server.updateArgHints(cm);});codemirror.on("keypress",function(cm,kb){var typed=String.fromCharCode(kb.which||kb.keyCode);if(/[\w\.]/.exec(typed)){server.complete(cm);}});}var defs=[];ajax("js/libs/ternjs/browser.json",function(code){defs.push(JSON.parse(code));ajax("js/libs/ternjs/ecma5.json",function(code){defs.push(JSON.parse(code));start(defs);});});}function compileAndRun(){code=codemirror.getValue();inject(code);}function compile(){code=codemirror.getValue();try{acorn.parse(code);status_pane.innerHTML="";}catch(e){var loc=e.loc;status_pane.innerHTML="Error on line "+loc.line+" column "+loc.column;console.log("Error on line "+loc.line+" column "+loc.column);return false;}return true;}function inject(code){script=(boilerplate[0]+code+boilerplate[1]+boilerplate[2]);preview=document.getElementById("preview");preview.srcdoc=script;}function reportError(e){status_pane.innerHTML="oops... "+e;}function load_template(el){if(!el.value){return;}ajax("./app/templates/"+el.value+".js",function(val){codemirror.setValue(val);compileAndRun();});}function insert_template(el){if(!el.value){return;}ajax("./app/templates/"+el.value+".js",function(val){codemirror.replaceSelection(val);compileAndRun();});}(function(){var e,t,bind=function(e,t){return function(){return e.apply(t,arguments);};},extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key)){child[key]=parent[key];}}function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;ZeroPaste=(function(superClass){extend(ZeroPaste,superClass);function ZeroPaste(){this.updateUser=bind(this.updateUser,this);this.route=bind(this.route,this);this.onOpenWebsocket=bind(this.onOpenWebsocket,this);this.loadAbout=bind(this.loadAbout,this);this.doPublish=bind(this.doPublish,this);this.publishPaste=bind(this.publishPaste,this);this.loadNew=bind(this.loadNew,this);this.deletePaste=bind(this.deletePaste,this);this.showLoadedPaste=bind(this.showLoadedPaste,this);this.loadPaste=bind(this.loadPaste,this);this.init=bind(this.init,this);return ZeroPaste.__super__.constructor.apply(this,arguments);}ZeroPaste.prototype.init=function(){return this.site_info=null,this.current_paste=null,this.size_current=null,this.size_max=null,window.addEventListener("load",function(e){return function(t){return document.getElementById("publish_button").addEventListener("click",function(t){return e.site_info.cert_user_id?e.publishPaste():(document.getElementById("save").style.pointerEvents="auto",e.cmd("certSelect",[["zeroid.bit"]]));},false),document.getElementById("delete_button").addEventListener("click",function(t){return e.cmd("wrapperConfirm",["Are you sure?","Delete"],function(t){return t?e.deletePaste():false;});},false),document.getElementById("fork_button").addEventListener("click",function(t){var n,r,o,i,a,d,s;if(document.getElementById("scriptview").style.display="none",document.getElementById("script_description").value=e.current_paste.description,document.getElementById("script_encryption").checked=e.current_paste.encrypted,e.initEditor(),editor.setValue(e.current_paste.body),"plaintext"!==e.current_paste.language&&"text/plain"!==e.current_paste.language){}for(s=document.getElementById("select_language"),d=s.options,o=0,i=d.length;i>o;o++){if(a=d[o],a.value===e.current_paste.language){s.value=a.value,editor.setOption("mode",e.current_paste.language),r=CodeMirror.findModeByMIME(e.current_paste.language),r&&CodeMirror.autoLoadMode(editor,r.mode);break;}if(n=CodeMirror.findModeByMIME(a.value),(null!=n?n.mode:false)===e.current_paste.language){s.value=a.value,editor.setOption("mode",a.value),CodeMirror.autoLoadMode(editor,e.current_paste.language);break;}}return document.getElementById("save").style.display="block";},false),document.getElementById("select_language").addEventListener("change",function(e){var t;return editor.setOption("mode",e.target.value),t=CodeMirror.findModeByMIME(e.target.value),t?CodeMirror.autoLoadMode(editor,t.mode):false;},false),document.getElementById("select_tabwidth").addEventListener("change",function(e){return editor.setOption("tabSize",parseInt(e.target.value)),editor.setOption("indentUnit",parseInt(e.target.value));},false);};}(this),false);};ZeroPaste.prototype.initEditor=function(){return document.getElementById("save").style.display="block",null!=window.editor?(editor.setValue(""),editor.setOption("mode","text/plain"),void (document.getElementById("select_language").value="text/plain")):(window.editor=CodeMirror(document.getElementById("script_editor"),{lineNumbers:true,mode:null,theme:"default",matchBrackets:true,tabSize:4,indentUnit:4,autofocus:true}),window.editor_indent_space=true,editor.setOption("extraKeys",{Tab:function(e){return editor_indent_space?e.replaceSelection(Array(e.getOption("indentUnit")+1).join(" ")):e.replaceSelection("	");}}),editor.on("changes",function(e){return function(e){return window.Page.updateSize(encodeURIComponent(editor.getValue()).replace(/%../g,"x").length);};}(this)));};ZeroPaste.prototype.loadPaste=function(e,t){var n,r;return document.getElementById("save").style.display="none",document.getElementById("scriptview_body").innerText="LOADING...",document.getElementById("delete_button").style.display="none",n=document.getElementById("scriptview"),r=(new Spinner).spin(n),n.style.display="block",this.cmd("dbQuery",["SELECT\n    description,\n    body,\n    language,\n    paste_creator_user.value AS creator_user_id,\n    added,\n    encrypted\nFROM paste\n    LEFT JOIN json AS paste_creator_json ON (paste_creator_json.json_id = paste.json_id)\n    LEFT JOIN json AS paste_creator_content\n        ON (paste_creator_content.directory = paste_creator_json.directory AND\n            paste_creator_content.file_name = 'content.json')\n    LEFT JOIN keyvalue\n        AS paste_creator_user ON (paste_creator_user.json_id = paste_creator_content.json_id\n            AND paste_creator_user.key = 'cert_user_id')\nWHERE\n    paste_creator_json.directory = '"+e+"' AND paste_id = "+t],function(e){return function(t){var n;return t.error?void (t.error.startsWith("no such column")?e.cmd("wrapperNotification",["error","Error (Your database schema may possibly out of sync. Wait for a while and try again.): "+t.error]):e.cmd("wrapperNotification",["error","Error: "+t.error])):0===t.length?void e.cmd("wrapperNotification",["error","The paste you queried was not found"]):(n=t[0],e.current_paste={description:n.description,body:n.body,language:n.language,added:new Date(1000*n.added),creator_user_id:n.creator_user_id,encrypted:n.encrypted||false},r.stop(),document.getElementById("scriptview_size").textContent=(encodeURIComponent(e.current_paste.body).replace(/%../g,"x").length/1000).toFixed(2),e.current_paste.encrypted?e.current_paste.creator_user_id===e.site_info.cert_user_id?e.cmd("eciesDecrypt",[e.current_paste.description],function(t){return e.current_paste.description=t,e.cmd("eciesDecrypt",[e.current_paste.body],function(t){return e.current_paste.body=t,"plaintext"===e.current_paste.language||/^(application|text)\//.test(e.current_paste.language)?(document.getElementById("scriptview_encrypted").style.display="inline",e.showLoadedPaste()):e.cmd("eciesDecrypt",[e.current_paste.language],function(t){return e.current_paste.language=t,document.getElementById("scriptview_encrypted").style.display="inline",e.showLoadedPaste();});});}):void e.cmd("wrapperNotification",["error","Private pastes are encrypted and can only be decrypted by creator."]):(document.getElementById("scriptview_encrypted").style.display="none",e.showLoadedPaste()));};}(this));};ZeroPaste.prototype.showLoadedPaste=function(){var e,t;return e=document.getElementById("scriptview_body"),e.textContent=this.current_paste.body,"plaintext"===this.current_paste.language||"text/plain"===this.current_paste.language?this.addLineNum(e):(e.setAttribute("data-lang",this.current_paste.language),t=CodeMirror.findModeByMIME(this.current_paste.language),t?CodeMirror.requireMode(t.mode,function(t){return function(){return CodeMirror.colorize([e]),t.addLineNum(e);};}(this)):CodeMirror.requireMode(this.current_paste.language,function(t){return function(){return CodeMirror.colorize([e]),t.addLineNum(e);};}(this))),this.site_info.cert_user_id&&"block"===document.getElementById("scriptview").style.display&&(this.current_paste.creator_user_id===this.site_info.cert_user_id?document.getElementById("delete_button").style.display="inline":document.getElementById("delete_button").style.display="none"),document.getElementById("scriptview_description").textContent=this.current_paste.description,document.getElementById("scriptview_user").textContent=this.current_paste.creator_user_id,document.getElementById("scriptview_user").href="?user_"+this.current_paste.creator_user_id,document.getElementById("scriptview_language").textContent=this.current_paste.language,document.getElementById("scriptview_added").textContent=this.current_paste.added.toLocaleString();};ZeroPaste.prototype.addLineNum=function(e){var t,n,r,o,i;for(r="",o=e.textContent.split(/\n/).length,t=n=1,i=o;i>=1?i>=n:n>=i;t=i>=1?++n:--n){r+="<span>"+t+"</span>";}return e.innerHTML='<span class="line-num">'+r+"</span>"+e.innerHTML+'<span style="display:block;clear:both;"></span>';};ZeroPaste.prototype.deletePaste=function(){var e,t,n,r,o,i;return e=document.getElementById("delete_button"),e.style.pointerEvents="none",o=(new Spinner).spin(document.getElementById("scriptview")),(n=window.location.search.match(/^\?(1[a-zA-Z0-9]{26,33})_(\d+)&/))?(i=n[1],r=parseInt(n[2]),t="data/users/"+i+"/data.json",this.cmd("fileGet",{inner_path:t,required:true},function(n){return function(i){var a,d,s,c,u;for(i=JSON.parse(i),u=i.paste,a=d=0,s=u.length;s>d;a=++d){if(c=u[a],c.paste_id===r){i.paste.splice(a,1);break;}}return n.cmd("fileWrite",[t,n.jsonEncode(i)],function(r){return"ok"!==r?(n.cmd("wrapperNotification",["error","Error: "+r.error]),e.style.pointerEvents="auto"):n.cmd("sitePublish",{inner_path:t},function(t){return o.stop(),"ok"===t?(n.cmd("wrapperNotification",["done","Sucessfully deleted"]),location.search="?"):(n.cmd("wrapperNotification",["error","Failed to delete: "+t.error]),e.style.pointerEvents="auto");});});};}(this))):(o.stop(),void this.cmd("wrapperNotification",["error","Failed to delete: wrong URL"]));};ZeroPaste.prototype.loadNew=function(e,t,n){var r,o,i,a,d,s;return null==e&&(e=0),null==t&&(t=null),null==n&&(n=(new Date).getTime()/1000),document.getElementById("save").style.display="none",document.getElementById("scriptview").style.display="none",o=document.getElementById("copyview"),0===e&&((i=document.getElementById("copyview_next"))&&o.removeChild(i),s=document.createElement("h3"),t?s.appendChild(document.createTextNode("Scripts by "+t)):s.appendChild(document.createTextNode("New scripts")),o.appendChild(s)),o.style.display="block",a=(new Spinner).spin(o),r=12,d=t?"SELECT\n    paste_id,\n    description,\n    body,\n    paste_creator_user.value AS creator_user_id,\n    paste_creator_content.directory AS creator_directory,\n    added,\n    language,\n    encrypted\nFROM paste\n    LEFT JOIN json AS paste_creator_json ON (paste_creator_json.json_id = paste.json_id)\n    LEFT JOIN json AS paste_creator_content\n        ON (paste_creator_content.directory = paste_creator_json.directory AND\n            paste_creator_content.file_name = 'content.json')\n    LEFT JOIN keyvalue\n        AS paste_creator_user ON (paste_creator_user.json_id = paste_creator_content.json_id\n            AND paste_creator_user.key = 'cert_user_id')\nWHERE paste_creator_user.value = '"+t+"' AND added <= "+n+"\nORDER BY added DESC\nLIMIT "+(r+1)+" OFFSET "+r*e:"SELECT\n    paste_id,\n    description,\n    body,\n    paste_creator_user.value AS creator_user_id,\n    paste_creator_content.directory AS creator_directory,\n    added,\n    language\nFROM paste\n    LEFT JOIN json AS paste_creator_json ON (paste_creator_json.json_id = paste.json_id)\n    LEFT JOIN json AS paste_creator_content\n        ON (paste_creator_content.directory = paste_creator_json.directory AND\n            paste_creator_content.file_name = 'content.json')\n    LEFT JOIN keyvalue\n        AS paste_creator_user ON (paste_creator_user.json_id = paste_creator_content.json_id\n            AND paste_creator_user.key = 'cert_user_id')\nWHERE encrypted IS NULL OR encrypted = 0 AND added <= "+n+"\nORDER BY added DESC\nLIMIT "+(r+1)+" OFFSET "+r*e,this.cmd("dbQuery",[d],function(d){return function(s){var c,u,p,l,_;if(s.error){return void (s.error.startsWith("no such column")?d.cmd("wrapperNotification",["error","Error (Your database schema may possibly out of sync. Wait for a while and try again.): "+s.error]):d.cmd("wrapperNotification",["error","Error: "+s.error]));}for(u=s.length>r?s.slice(0,-1):s,c=document.createElement("div"),p=0,l=u.length;l>p;p++){_=u[p],d.add_snippet(c,_);}return a.stop(),o.appendChild(c),s.length===r+1?(i=document.createElement("button"),i.style.textAlign="center",i.style.display="block",i.textContent="Load more pastes",i.addEventListener("click",function(r){return o.removeChild(r.target),d.loadNew(e+1,t,n);},false),o.appendChild(i)):false;};}(this));};ZeroPaste.prototype.add_snippet=function(e,n){var r;return r=document.createElement("article"),r.classList.add("list"),n.encrypted?n.creator_user_id===window.Page.site_info.cert_user_id?(e.appendChild(r),window.Page.cmd("eciesDecrypt",[n.description],function(e){return function(e){return n.description=e,window.Page.cmd("eciesDecrypt",[n.body],function(e){return n.body=e,"plaintext"===n.language||/^(application|text)\//.test(n.language)?window.Page.add_snippet_2(r,n):window.Page.cmd("eciesDecrypt",[n.language],function(e){return n.language=e,window.Page.add_snippet_2(r,n);});});};}(this))):false:(e.appendChild(r),window.Page.add_snippet_2(r,n));};ZeroPaste.prototype.add_snippet_2=function(e,n){var r,o,i,a,d,s,c,u;return o=document.createElement("span"),s=document.createElement("a"),s.appendChild(document.createTextNode(n.description+"\nby "+n.creator_user_id+"\n("+new Date(1000*n.added).toLocaleString()+")")),s.href="?"+n.creator_directory+"_"+n.paste_id,o.appendChild(s),n.encrypted&&(a=document.createElement("span"),a.classList.add("enc-indicator"),i=document.createElement("img"),i.src="img/padlock.svg",i.width=10,a.appendChild(i),a.appendChild(document.createTextNode("Private")),o.appendChild(a)),e.appendChild(o),u=document.createElement("pre"),u.style.overflowX="auto","plaintext"!==n.language&&"text/plain"!==n.language&&u.setAttribute("data-lang",n.language),c=n.body.match(/^(.*(?:\n.*){0,3})/m),c?(o=c[1],o.length>1000&&(o=o.substr(0,1000)+"...")):o="",u.appendChild(document.createTextNode(o)),r=document.createElement("code"),r.appendChild(u),e.appendChild(r),"plaintext"===n.language||"text/plain"===n.language?window.Page.addLineNum(u):(u.style.display="none",(d=CodeMirror.findModeByMIME(n.language))?CodeMirror.requireMode(d.mode,function(e){return function(){return CodeMirror.colorize([u]),window.Page.addLineNum(u),u.style.display="block";};}(this)):CodeMirror.requireMode(n.language,function(e){return function(){return CodeMirror.colorize([u]),window.Page.addLineNum(u),u.style.display="block";};}(this)));};ZeroPaste.prototype.publishPaste=function(){var e,t,n,r;return e=editor.getValue(),""===e?void this.cmd("wrapperNotification",["error","You can't create empty paste."]):(t=document.getElementById("script_description").value,r=editor.getOption("mode"),r||(r="text/plain"),n=document.getElementById("script_encryption").checked,n?this.cmd("eciesEncrypt",[t],function(n){return function(o){return t=o,n.cmd("eciesEncrypt",[e],function(o){return e=o,n.cmd("eciesEncrypt",[r],function(o){return r=o,n.doPublish(e,t,r,true);});});};}(this)):this.doPublish(e,t,r,false));};ZeroPaste.prototype.doPublish=function(e,t,n,r){var o,i,a;return n||(n="text/plain"),o=document.getElementById("save"),o.style.pointerEvents="none",a=(new Spinner).spin(o),i="data/users/"+this.site_info.auth_address+"/data.json",this.cmd("fileGet",{inner_path:i,required:false},function(o){return function(d){var s,c,u,p;for(d=d?JSON.parse(d):{next_paste_id:0,next_comment_id:0,paste:[],comment:[]},p=d.paste,s=0,c=p.length;c>s;s++){u=p[s],"plaintext"===u.language&&(u.language="text/plain");}return d.paste.push({paste_id:d.next_paste_id,description:t,body:e,language:n,encrypted:r,added:Math.floor((new Date).getTime()/1000)}),d.next_paste_id++,o.cmd("fileWrite",[i,o.jsonEncode(d)],function(e){return"ok"!==e?("Site sign failed"===e.error?o.cmd("wrapperNotification",["error","Site sign failed. Possibly your post may have exceeded the size limit:"]):o.cmd("wrapperNotification",["error","Error: "+e.error]),document.getElementById("save").style.pointerEvents="auto"):o.cmd("sitePublish",{inner_path:i},function(e){return"ok"===e?(a.stop(),window.location.search="?"+o.site_info.auth_address+"_"+(d.next_paste_id-1)):(o.cmd("wrapperNotification",["error","An error occured: "+e.error]),a.stop(),document.getElementById("save").style.pointerEvents="auto");});});};}(this));};ZeroPaste.prototype.loadAbout=function(){return this.cmd("dbQuery",["SELECT count(*) FROM paste"],function(e){return function(t){return t.error?void e.cmd("wrapperNotification",["error","An error occured: "+t.error]):document.getElementById("stat_total").textContent=t[0]["count(*)"];};}(this)),this.cmd("dbQuery",["SELECT count(*) FROM paste WHERE encrypted = 1"],function(e){return function(t){return t.error?void e.cmd("wrapperNotification",["error","An error occured: "+t.error]):document.getElementById("stat_encrypted").textContent=t[0]["count(*)"];};}(this)),this.cmd("dbQuery",["SELECT count(*) FROM keyvalue WHERE key = 'cert_user_id'"],function(e){return function(t){return t.error?void e.cmd("wrapperNotification",["error","An error occured: "+t.error]):document.getElementById("stat_users").textContent=t[0]["count(*)"];};}(this)),document.getElementById("aboutview").style.display="block";};ZeroPaste.prototype.onOpenWebsocket=function(e){return this.cmd("siteInfo",{},function(e){return function(t){var n,r;return e.site_info=t,document.getElementById("title").textContent=e.site_info.content.title,e.updateUser(e.site_info.cert_user_id),(r=window.location.search.match(/^\?(1[a-zA-Z0-9]{26,33})_(\d+)&/))?e.loadPaste(r[1],r[2]):(r=window.location.search.match(/^\?new&/))?e.loadNew():(r=window.location.search.match(/^\?about&/))?e.loadAbout():(r=window.location.search.match(/^\?user_([A-Za-z0-9]+@[A-Za-z0-9-.]+)&/))?e.loadNew(0,r[1]):(n="data/users/"+e.site_info.auth_address+"/content.json",e.cmd("fileRules",n,function(t){return t?(e.size_current=t.current_size,e.size_max=t.max_size,e.updateSize(0)):false;}),e.initEditor());};}(this));};ZeroPaste.prototype.route=function(e,t){switch(e){case"setSiteInfo":return this.site_info=t.params,this.updateUser(this.site_info.cert_user_id);}};ZeroPaste.prototype.updateUser=function(e){var t;return e?(document.getElementById("publish_button").textContent="Save",document.getElementById("size_disp").style.display="block",t=document.getElementById("showlist"),t.href="?user_"+this.site_info.cert_user_id,t.style.display="inline-block","block"===document.getElementById("scriptview").style.display?document.getElementById("scriptview_user").textContent===e?document.getElementById("delete_button").style.display="inline":document.getElementById("delete_button").style.display="none":false):(document.getElementById("publish_button").textContent="Select user...",document.getElementById("size_disp").style.display="none",t=document.getElementById("showlist"),t.style.display="none");};ZeroPaste.prototype.updateSize=function(e){var t;return t=document.getElementById("size_current"),e>0?t.textContent=((this.size_current+e)/1000).toFixed(2)+" ("+(this.size_current/1000).toFixed(2)+" + approx. "+(e/1000).toFixed(2)+")":t.textContent=""+(this.size_current/1000).toFixed(2),e+this.size_current>this.size_max?t.style.color="red":t.style.color="grey",document.getElementById("size_max").textContent=(this.size_max/1000).toFixed(2);};ZeroPaste.prototype.jsonEncode=function(e){return btoa(unescape(encodeURIComponent(JSON.stringify(e))));};return ZeroPaste;})(ZeroFrame);window.Page=new ZeroPaste();}).call(this);